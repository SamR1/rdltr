webpackJsonp([1],{"1JyO":function(t,e){},"3mPE":function(t,e){},Cz9A:function(t,e){},GXhG:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("/5sW"),a={computed:{auth:function(){return this.$store.getters.isAuthenticated},username:function(){return this.$store.getters.user.username}},methods:{onLogout:function(){this.$store.dispatch("logout")},displayMenu:function(){var t=document.getElementById("responsive-navbar");"nav"===t.className?t.className+=" responsive":t.className="nav"}}},n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{attrs:{id:"header"}},[r("div",{staticClass:"logo"},[r("router-link",{attrs:{to:"/"}},[t._v("\n      rdltr "),r("small",[t._v('a simple "read-it later" app')])])],1),t._v(" "),r("nav",{staticClass:"nav",attrs:{id:"responsive-navbar"},on:{click:t.displayMenu}},[r("ul",[t.auth?t._e():r("li",{staticClass:"menu"},[r("router-link",{attrs:{to:"/register"}},[t._v("Register")])],1),t._v(" "),t.auth?t._e():r("li",{staticClass:"menu"},[r("router-link",{attrs:{to:"/login"}},[t._v("Log in")])],1),t._v(" "),t.auth?r("li",{staticClass:"user menu"},[r("router-link",{attrs:{to:"/profile"}},[t._v(t._s(t.username))])],1):t._e(),t._v(" "),t.auth?r("li",{staticClass:"menu"},[r("span",{staticClass:"logout",on:{click:t.onLogout}},[t._v("Logout")])]):t._e()])]),t._v(" "),r("div",{attrs:{id:"nav-icon"},on:{click:t.displayMenu}},[r("i",{staticClass:"fa fa-bars"})])])},staticRenderFns:[]};var i={name:"app",components:{"app-header":r("VU/8")(a,n,!1,function(t){r("cr/h")},"data-v-45cc0afb",null).exports}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var c=r("VU/8")(i,o,!1,function(t){r("RbyN")},null,null).exports,u=r("/ocq"),l={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.displayLabel?r("label",[t._v("\n    Category\n  ")]):t._e(),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCategory,expression:"selectedCategory"}],staticClass:"form-control",attrs:{id:"categories"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedCategory=e.target.multiple?r:r[0]}}},t._l(t.userCategories,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v("\n      "+t._s(e.name)+"\n    ")])}),0)])},staticRenderFns:[]};var d=r("VU/8")({props:["displayLabel"],computed:{selectedCategory:{get:function(){return this.$store.getters.selectedCategory},set:function(t){this.$store.commit("updateCategory",t)}},userCategories:function(){return this.$store.getters.userCategories}},beforeDestroy:function(){this.$store.commit("updateCategory","")}},l,!1,function(t){r("nMJd")},"data-v-e1d231dc",null).exports,p={data:function(){return{link:""}},components:{AppCategorySelect:d},computed:{errMessage:function(){return this.$store.getters.articleErrorMessage},selectedCategory:function(){return this.$store.getters.selectedCategory}},methods:{onSubmit:function(){var t={url:this.link,category_id:this.selectedCategory};return this.$store.dispatch("addArticle",t)}}},m={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contnr",attrs:{id:"add-article"}},[r("div",{staticClass:"article-form"},[r("div",{staticClass:"title"},[t._v("Add an article")]),t._v(" "),r("hr"),t._v(" "),r("form",{on:{submit:function(e){e.preventDefault(),t.onSubmit()}}},[r("div",{staticClass:"input"},[r("label",{attrs:{for:"link"}},[t._v("Link")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],attrs:{id:"link",required:""},domProps:{value:t.link},on:{input:function(e){e.target.composing||(t.link=e.target.value)}}})]),t._v(" "),r("app-category-select",{attrs:{"display-label":"true"}}),t._v(" "),t._m(0)],1),t._v(" "),t.errMessage?r("p",{staticClass:"user-error"},[t._v(t._s(t.errMessage))]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"submit add-article-submit"},[e("button",{attrs:{type:"submit"}},[this._v("Submit")])])}]};var v=r("VU/8")(p,m,!1,function(t){r("Cz9A")},"data-v-18ed2398",null).exports,f={props:["articleContent"],methods:{displayContent:function(){document.getElementById("article-content").innerHTML=this.articleContent}},mounted:function(){this.displayContent()}},g={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"article-content",attrs:{id:"article-content"}})},staticRenderFns:[]};var h=r("VU/8")(f,g,!1,function(t){r("ipk5")},"data-v-47e6a203",null).exports,_={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"badge badge-rdltr"},[this._v("\n  "+this._s(this.categoryName)+"\n")])},staticRenderFns:[]};var w=r("VU/8")({props:["categoryName"],computed:{categories:function(){return this.$store.getters.user.categories}}},_,!1,function(t){r("xi4b")},"data-v-0891e756",null).exports,C={components:{AppCategoryBadge:w,AppArticleContent:h},computed:{article:{get:function(){return this.$store.getters.article}}},created:function(){this.$store.dispatch("getArticle",this.$route.params.id)},beforeDestroy:function(){this.$store.commit("getUserArticle","")}},y={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container",attrs:{id:"article-detail"}},[t.article.category?r("app-category-badge",{attrs:{"category-name":t.article.category.name}}):t._e(),t._v(" "),r("h1",[t._v(t._s(t.article.title))]),t._v(" "),r("p",{staticClass:"article-link"},[t._v("Link: "),r("a",{attrs:{href:t.article.url}},[t._v(t._s(t.article.url))])]),t._v(" "),t.article.content?r("app-article-content",{attrs:{"article-content":t.article.content}}):t._e()],1)},staticRenderFns:[]};var b=r("VU/8")(C,y,!1,function(t){r("W18C")},"data-v-f549b982",null).exports,P={props:["article"],components:{AppCategoryBadge:w}},E={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-sm-6 col-md-4 col-lg-3"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("app-category-badge",{attrs:{"category-name":t.article.category.name}}),t._v(" "),r("h5",{staticClass:"card-title"},[t._v(t._s(t.article.title))]),t._v(" "),r("p",{staticClass:"card-text"})],1),t._v(" "),r("div",{staticClass:"card-footer"},[r("router-link",{staticClass:"btn-rdltr",attrs:{to:{name:"articleDetail",params:{id:t.article.id}},tag:"button"}},[t._v("\n        Read\n      ")])],1)])])},staticRenderFns:[]};var k={computed:{articles:{get:function(){return this.$store.getters.articles}}},components:{AppArticleCard:r("VU/8")(P,E,!1,function(t){r("fYRA")},"data-v-577de50a",null).exports},created:function(){this.$store.dispatch("getArticles")}},$={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row",attrs:{id:"user-articles"}},[0===t.articles.length?r("p",[t._v("\n    No articles. Add "),r("router-link",{attrs:{to:"/articles/add"}},[t._v("one")]),t._v("!\n  ")],1):t._e(),t._v(" "),t._l(t.articles,function(t){return r("app-article-card",{key:t.id,attrs:{article:t}})})],2)},staticRenderFns:[]};var A={data:function(){return{query:""}},components:{AppArticles:r("VU/8")(k,$,!1,function(t){r("GXhG")},"data-v-78a3bd02",null).exports,AppCategorySelect:d}},M={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid",attrs:{id:"home"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"row",attrs:{id:"user-categories"}},[r("div",{staticClass:"col-md-3"},[r("app-category-select")],1),t._v(" "),r("div",{staticClass:"col search"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),t._m(0)])]),t._v(" "),r("div",{staticClass:"col-md-1"},[r("router-link",{staticClass:"btn-rdltr",attrs:{to:"/articles/add",tag:"button",type:"submit"}},[r("i",{staticClass:"fa fa-plus-square",attrs:{"aria-hidden":"true"}})])],1)])])]),t._v(" "),r("hr"),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("app-articles")],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn-rdltr",attrs:{type:"submit"}},[this._v("Search")])])}]};var N=r("VU/8")(A,M,!1,function(t){r("uszm")},"data-v-16b348f9",null).exports,U={render:function(){var t=this.$createElement;return(this._self._c||t)("p",[this._v("404 - Not Found")])},staticRenderFns:[]};var T=r("VU/8")(null,U,!1,function(t){r("dkey")},"data-v-3ea2f417",null).exports,x={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contnr",attrs:{id:"actionType"}},[r("div",{staticClass:"user-form"},[r("form",[r("div",{staticClass:"input"},[r("label",{attrs:{for:"username"}},[t._v("Username")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],attrs:{id:"username",disabled:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"input"},[r("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{type:"email",id:"email",disabled:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"input"},[r("label",{attrs:{for:"email"}},[t._v("Inscription date")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.created_at,expression:"user.created_at"}],attrs:{id:"creationDate",disabled:""},domProps:{value:t.user.created_at},on:{input:function(e){e.target.composing||t.$set(t.user,"created_at",e.target.value)}}})]),t._v(" "),"editProfile"===t.actionType?r("div",{staticClass:"input"},[r("label",{attrs:{for:"password"}},[t._v("Old password")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.oldPassword,expression:"oldPassword"}],attrs:{type:"password",id:"oldPassword",required:""},domProps:{value:t.oldPassword},on:{input:function(e){e.target.composing||(t.oldPassword=e.target.value)}}})]):t._e(),t._v(" "),"editProfile"===t.actionType?r("div",{staticClass:"input"},[r("label",{attrs:{for:"password"}},[t._v("New password")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword,expression:"newPassword"}],attrs:{type:"password",id:"password",required:""},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value)}}})]):t._e(),t._v(" "),"editProfile"===t.actionType?r("div",{staticClass:"input"},[r("label",{attrs:{for:"confirm-password"}},[t._v("Confirm New Password")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmNewPassword,expression:"confirmNewPassword"}],attrs:{type:"password",id:"confirm-password",required:""},domProps:{value:t.confirmNewPassword},on:{input:function(e){e.target.composing||(t.confirmNewPassword=e.target.value)}}})]):t._e(),t._v(" "),"editProfile"===t.actionType?r("div",{staticClass:"submit"},[r("button",{attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.onSubmit()}}},[t._v("Submit")]),t._v(" "),r("router-link",{staticClass:"cancel",attrs:{to:"/profile",tag:"button"}},[t._v("Cancel")])],1):r("div",{staticClass:"submit"},[r("router-link",{attrs:{to:"/profile/edit",tag:"button"}},[t._v("Change password")])],1)]),t._v(" "),t.errMessage?r("p",{staticClass:"user-error"},[t._v(t._s(t.errMessage))]):t._e()])])},staticRenderFns:[]};var R=r("VU/8")({props:["actionType"],data:function(){return{oldPassword:"",newPassword:"",confirmNewPassword:""}},computed:{errMessage:function(){return this.$store.getters.userErrorMessage},user:function(){return this.$store.getters.user}},methods:{onSubmit:function(){var t=this,e={old_password:this.oldPassword,new_password:this.newPassword,new_password_conf:this.confirmNewPassword};this.$store.dispatch("updateProfile",e).then(function(){t.oldPassword="",t.newPassword="",t.confirmNewPassword=""})}}},x,!1,function(t){r("3mPE")},"data-v-8016edf4",null).exports,S={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contnr",attrs:{id:"actionType"}},[r("div",{staticClass:"user-form"},[r("form",{on:{submit:function(e){e.preventDefault(),t.onSubmit(t.actionType)}}},["register"===t.actionType?r("div",{staticClass:"input"},[r("label",{attrs:{for:"username"}},[t._v("Username")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{id:"username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]):t._e(),t._v(" "),r("div",{staticClass:"input"},[r("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",id:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"input"},[r("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),"register"===t.actionType?r("div",{staticClass:"input"},[r("label",{attrs:{for:"confirm-password"}},[t._v("Confirm Password")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],attrs:{type:"password",id:"confirm-password",required:""},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}})]):t._e(),t._v(" "),t._m(0)]),t._v(" "),t.errMessage?r("p",{staticClass:"user-error"},[t._v(t._s(t.errMessage))]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"submit"},[e("button",{attrs:{type:"submit"}},[this._v("Submit")])])}]};var q=r("VU/8")({props:["actionType"],data:function(){return{username:"",email:"",password:"",confirmPassword:""}},computed:{errMessage:function(){return this.$store.getters.userErrorMessage}},methods:{onSubmit:function(t){var e={email:this.email,password:this.password};return"register"===t&&(e.username=this.username,e.password_conf=this.confirmPassword),this.$store.dispatch("loginOrRegister",{actionType:t,formData:e})}}},S,!1,function(t){r("1JyO")},"data-v-cee8237c",null).exports,F=r("NYxO"),V=r("//Fk"),D=r.n(V),L=r("mtWM"),O=r.n(L),z=O.a.create({baseURL:"http://localhost:5000/api"});z.interceptors.request.use(function(t){if(Y.state.user.authToken){var e="Bearer "+Y.state.user.authToken;t.headers.Authorization!==e&&(t.headers.Authorization="Bearer "+Y.state.user.authToken)}return t},function(t){return D.a.reject(t)});var B=z,I=function(t,e,r){return e.response?t("updateArticlesErrorMsg",e.response.data.message):t("updateArticlesErrorMsg",e.message?e.message:r)},J={state:{article:{},articles:[],articleErrorMessage:null},getters:{article:function(t){return t.article},articles:function(t){return t.articles},articleErrorMessage:function(t){return t.articleErrorMessage}},mutations:{updateArticlesErrorMsg:function(t,e){t.articleErrorMessage=e},getUserArticle:function(t,e){t.article=e},getUserArticles:function(t,e){t.articles=e}},actions:{getArticle:function(t,e){var r=t.commit;B.get("articles/"+e).then(function(t){"success"===t.data.status&&r("getUserArticle",t.data.data[0])}).catch(function(t){return I(r,t,"error on articles fetch")})},getArticles:function(t){var e=t.commit;B.get("articles").then(function(t){"success"===t.data.status&&e("getUserArticles",t.data.data)}).catch(function(t){return I(e,t,"error on articles fetch")})},addArticle:function(t,e){var r=t.commit;B.post("articles",e).then(function(t){"success"===t.data.status&&K.replace("/")}).catch(function(t){return I(r,t,"error on article add")})}}},G=O.a.create({baseURL:"http://localhost:5000/api"}),W=function(t,e,r){return e.response?t("updateErrorMsg",e.response.data.message):t("updateErrorMsg",e.message?e.message:r)},H={state:{authToken:null,user:{},userErrorMessage:null},getters:{isAuthenticated:function(t){return null!==t.authToken},user:function(t){return t.user},userCategories:function(t){return t.user.categories},userErrorMessage:function(t){return t.userErrorMessage}},mutations:{authUser:function(t,e){t.authToken=e,t.userErrorMessage=null},clearUserData:function(t,e){t.authToken=null,t.user={},t.userErrorMessage=null},updateErrorMsg:function(t,e){t.userErrorMessage=e},userProfile:function(t,e){t.user=e}},actions:{checkUserAuth:function(t){var e=t.commit,r=t.dispatch;window.localStorage.authToken&&(e("authUser",window.localStorage.authToken),r("getUserProfile"))},getUserProfile:function(t){var e=t.commit;B.get("auth/profile").then(function(t){"success"===t.data.status&&e("userProfile",t.data.user)}).catch(function(t){return W(e,t,"error on profile")})},loginOrRegister:function(t,e){var r=t.commit,s=t.dispatch;G.post("/auth/"+e.actionType,e.formData).then(function(t){if("success"===t.data.status){var e=t.data.auth_token;window.localStorage.setItem("authToken",e),r("authUser",e),s("getUserProfile"),K.replace("/")}}).catch(function(t){return W(r,t,"error on "+e.actionType)})},logout:function(t){(0,t.commit)("clearUserData"),localStorage.removeItem("authToken"),K.replace("/login")},updateProfile:function(t,e){var r=t.commit;B.post("/auth/profile/edit",e).then(function(t){"success"===t.data.status&&K.replace("/profile")}).catch(function(t){return W(r,t,"error on password update")})}}};s.a.use(F.a);var Y=new F.a.Store({state:{selectedCategory:""},mutations:{updateCategory:function(t,e){t.selectedCategory=e}},actions:{updateSelectedCategory:function(t,e){(0,t.commit)("updateCategory",e)}},getters:{selectedCategory:function(t){return t.selectedCategory}},modules:{articles:J,user:H}});function j(t,e,r){Y.dispatch("checkUserAuth").then(function(){return Y.getters.isAuthenticated&&["/login","/register"].includes(t.path)?r("/"):Y.getters.isAuthenticated||["/login","/register"].includes(t.path)?void 0:r("/login")}),r()}s.a.use(u.a);var X=[{path:"/",component:N,beforeEnter:j},{path:"/register",component:q,props:{actionType:"register"},beforeEnter:j},{path:"/login",component:q,props:{actionType:"login"},beforeEnter:j},{path:"/profile",component:R,props:{actionType:"viewProfile"},beforeEnter:j},{path:"/profile/edit",component:R,props:{actionType:"editProfile"},beforeEnter:j},{path:"/articles/add",component:v,beforeEnter:j},{path:"/articles/:id",component:b,name:"articleDetail",beforeEnter:j},{path:"*",component:T}],K=new u.a({mode:"history",routes:X});s.a.config.productionTip=!1,new s.a({el:"#app",router:K,store:Y,render:function(t){return t(c)}})},RbyN:function(t,e){},W18C:function(t,e){},"cr/h":function(t,e){},dkey:function(t,e){},fYRA:function(t,e){},ipk5:function(t,e){},nMJd:function(t,e){},uszm:function(t,e){},xi4b:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.38b50d7e228a3e3ba26b.js.map