webpackJsonp([1],{"6UTM":function(t,e){},"6xg1":function(t,e){},"9S6y":function(t,e){},Cici:function(t,e){},G8Ci:function(t,e){},GY2N:function(t,e){},KnKK:function(t,e){},NB8q:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("/5sW"),r={computed:{auth:function(){return this.$store.getters.isAuthenticated},username:function(){return this.$store.getters.user.username}},methods:{displayMenu:function(){var t=document.getElementById("responsive-navbar");"nav"===t.className?t.className+=" responsive":t.className="nav"},onLogout:function(){this.$store.dispatch("logout")}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{attrs:{id:"header"}},[s("div",{staticClass:"logo"},[s("router-link",{attrs:{to:"/"}},[t._v("\n      rdltr "),s("small",[t._v('a simple "read-it later" app')])])],1),t._v(" "),s("nav",{staticClass:"nav",attrs:{id:"responsive-navbar"},on:{click:t.displayMenu}},[s("ul",[t.auth?t._e():s("li",{staticClass:"menu"},[s("router-link",{attrs:{to:"/register"}},[t._v("Register")])],1),t._v(" "),t.auth?t._e():s("li",{staticClass:"menu"},[s("router-link",{attrs:{to:"/login"}},[t._v("Log in")])],1),t._v(" "),t.auth?s("li",{staticClass:"user menu"},[s("router-link",{attrs:{to:"/profile"}},[t._v(t._s(t.username))])],1):t._e(),t._v(" "),t.auth?s("li",{staticClass:"menu"},[s("router-link",{attrs:{to:"/settings"}},[t._v("Settings")])],1):t._e(),t._v(" "),t.auth?s("li",{staticClass:"menu"},[s("span",{staticClass:"logout",on:{click:t.onLogout}},[t._v("Logout")])]):t._e(),t._v(" "),t.auth?s("li",{staticClass:"menu"},[s("router-link",{attrs:{to:"/articles/add"}},[s("i",{staticClass:"fa fa-plus-square",attrs:{"aria-hidden":"true"}})])],1):t._e()])]),t._v(" "),s("div",{attrs:{id:"nav-icon"},on:{click:t.displayMenu}},[s("i",{staticClass:"fa fa-bars"})])])},staticRenderFns:[]};var i={name:"app",components:{"app-header":s("VU/8")(r,n,!1,function(t){s("qVcS")},"data-v-d8659674",null).exports}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var c=s("VU/8")(i,o,!1,function(t){s("zjQv"),s("UTWD")},null,null).exports,u=s("/ocq"),l=function(t,e,s){return e.response?t("setErrorMessage",e.response.data.message):t("setErrorMessage",e.message?e.message:s)},d=function(t,e){var s,a=t;return e.includes("singular")&&(a="categories"===t?"category":"tag"),e.includes("capitalize")&&(a=(s=a).charAt(0).toUpperCase()+s.slice(1)),a},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=t.page||0!==e?{name:"articlesPage",params:{page:t.pagination.page+e}}:{name:"home"},a={};return t.selectedCategory&&(a.cat_id=t.selectedCategory),t.query&&(a.q=t.query),s.query=a,s},m={props:["displayLabel","filter"],computed:{selectedCategory:{get:function(){return this.$store.getters.selectedCategory},set:function(t){return this.$store.dispatch("updateSelectedCategory",t)}},pagination:function(){return this.$store.getters.pagination},userCategories:function(){return this.$store.getters.userCategories}},beforeDestroy:function(){return this.$store.dispatch("updateSelectedCategory","")},methods:{filterArticles:function(){this.filter&&this.$router.push(p(this.$store.getters))}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["true"===t.displayLabel?s("label",[t._v("\n    Category\n  ")]):t._e(),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCategory,expression:"selectedCategory"}],staticClass:"form-control",attrs:{id:"categories"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedCategory=e.target.multiple?s:s[0]},t.filterArticles]}},[t.displayLabel?t._e():s("option",{attrs:{value:""}},[t._v("All categories")]),t._v(" "),t._l(t.userCategories,function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v("\n      "+t._s(e.name)+"\n    ")])})],2)])},staticRenderFns:[]};var v=s("VU/8")(m,g,!1,function(t){s("u7RO")},"data-v-57063ae7",null).exports,f=s("RUzx"),h={components:{AppMultiselect:s.n(f).a},props:["displayLabel"],computed:{selectedTags:{get:function(){return this.$store.getters.selectedTags},set:function(t){return this.$store.dispatch("updateSelectedTags",t)}},userTags:function(){return this.$store.getters.userTags?this.$store.getters.userTags.map(function(t){return t.name}):[]}},beforeDestroy:function(){return this.$store.dispatch("updateSelectedTags",[])},methods:{addTag:function(t){this.selectedTags.push(t)}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tag-input"},[t.displayLabel?s("label",[t._v("Tags")]):t._e(),t._v(" "),s("app-multiselect",{attrs:{placeholder:"Search or add a tag",multiple:!0,options:t.userTags,taggable:!0},on:{tag:t.addTag},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}})],1)},staticRenderFns:[]};var C=s("VU/8")(h,_,!1,function(t){s("6xg1")},"data-v-daad37cc",null).exports,y={components:{AppCategorySelect:v,AppTagMultiSelect:C},data:function(){return{link:""}},computed:{errorMessage:function(){return this.$store.getters.errorMessage},loading:function(){return this.$store.getters.loading},selectedCategory:function(){return this.$store.getters.selectedCategory},selectedTags:function(){return this.$store.getters.selectedTags}},beforeDestroy:function(){this.$store.commit("setErrorMessage",null)},methods:{onSubmit:function(){var t={url:this.link,category_id:this.selectedCategory,tags:this.selectedTags};return this.$store.dispatch("addArticle",t)}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contnr",attrs:{id:"add-article"}},[s("div",{staticClass:"rdltr-box"},[s("div",{staticClass:"title"},[t._v("Add an article")]),t._v(" "),s("hr"),t._v(" "),t.errorMessage?s("p",{staticClass:"alert alert-danger"},[t._v("\n      "+t._s(t.errorMessage)+"\n    ")]):t._e(),t._v(" "),s("form",{on:{submit:function(e){e.preventDefault(),t.onSubmit()}}},[s("div",{staticClass:"input"},[s("label",{attrs:{for:"link"}},[t._v("Link")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],attrs:{id:"link",required:""},domProps:{value:t.link},on:{input:function(e){e.target.composing||(t.link=e.target.value)}}})]),t._v(" "),s("app-category-select",{attrs:{"display-label":"true"}}),t._v(" "),t.selectedTags?s("app-tag-multi-select",{attrs:{"display-label":!0}}):t._e(),t._v(" "),s("div",{staticClass:"submit add-article-submit"},[s("button",{attrs:{type:"submit",disabled:t.loading}},[t._v("Submit")])])],1),t._v(" "),t.loading?s("div",{staticClass:"text-center"},[s("i",{staticClass:"fa fa-spinner fa-pulse fa-3x fa-fw"})]):t._e()])])},staticRenderFns:[]};var w=s("VU/8")(y,b,!1,function(t){s("ivaL")},"data-v-436082c1",null).exports,T={props:["articleContent"],methods:{displayContent:function(){document.getElementById("article-content").innerHTML=this.articleContent}},mounted:function(){this.displayContent()}},$={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"article-content",attrs:{id:"article-content"}})},staticRenderFns:[]};var k=s("VU/8")(T,$,!1,function(t){s("NLYe")},"data-v-1cbfd807",null).exports,A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",[s("div",{staticClass:"input"},[s("label",{attrs:{for:"description"}},[t._v("Comments")]),t._v(" "),t.onCommentsEdition?s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comments,expression:"comments"}],attrs:{id:"description",disabled:!t.onCommentsEdition},domProps:{value:t.comments},on:{input:function(e){e.target.composing||(t.comments=e.target.value)}}}):s("p",{attrs:{id:"comments"}},[t._v(t._s(t.comments?t.comments:"No comments yet"))])]),t._v(" "),t.onCommentsEdition?s("div",{staticClass:"submit"},[s("button",{attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.onSubmit()}}},[t._v("\n      Submit\n    ")]),t._v(" "),s("button",{attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.onCommentsEdition=!t.onCommentsEdition}}},[t._v("\n      Cancel\n    ")])]):s("div",[s("button",{staticClass:"btn-rdltr",attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.onCommentsEdition=!t.onCommentsEdition}}},[t._v("\n      Edit comments\n    ")])])])},staticRenderFns:[]};var E=s("VU/8")({props:["articleComments"],data:function(){return{comments:"",onCommentsEdition:!1}},beforeMount:function(){this.comments=this.articleComments},methods:{onSubmit:function(){var t=this;this.$store.dispatch("updateArticle",{id:this.$route.params.id,formData:{comments:this.comments}}).then(function(){t.onCommentsEdition=!1})}}},A,!1,function(t){s("Cici")},"data-v-08ef2e62",null).exports,P={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{class:"badge badge-rdltr"+(this.isTag?"-tag":"")},[this._v("\n  "+this._s(this.name)+"\n")])},staticRenderFns:[]};var x=s("VU/8")({props:["name","isTag"]},P,!1,function(t){s("GY2N")},"data-v-1a572f20",null).exports,M={components:{AppBadge:x,AppCategorySelect:v,AppArticleComments:E,AppArticleContent:k,AppTagMultiSelect:C},data:function(){return{onCategoryEdition:!1,onTagEdition:!1}},computed:{article:{get:function(){return this.$store.getters.article}},errorMessage:{get:function(){return this.$store.getters.errorMessage}},selectedCategory:{get:function(){return this.$store.getters.selectedCategory}},selectedTags:{get:function(){return this.$store.getters.selectedTags}}},created:function(){if(this.$store.getters.isAuthenticated)return this.$store.dispatch("getArticle",this.$route.params.id)},beforeDestroy:function(){this.$store.commit("getUserArticle",{}),this.$store.commit("setErrorMessage",null)},methods:{onDeleteArticle:function(){var t=this;this.$store.dispatch("deleteArticle",this.article.id).then(function(){return t.$router.push("/")})},onUpdateCategory:function(){var t=this;this.$store.dispatch("updateArticle",{id:this.$route.params.id,formData:{category_id:this.selectedCategory}}).then(function(){t.onCategoryEdition=!1})},onUpdateTags:function(){var t=this;this.$store.dispatch("updateArticle",{id:this.$route.params.id,formData:{tags:this.selectedTags}}).then(function(){t.onTagEdition=!1})},updateSelectedCategory:function(){var t=this;return this.$store.dispatch("updateSelectedCategory",this.article.category.id).then(function(){return t.onCategoryEdition=!t.onCategoryEdition})},updateSelectedTags:function(){var t=this,e=this.article.tags.map(function(t){return t.name});return this.$store.dispatch("updateSelectedTags",e).then(function(){return t.onTagEdition=!t.onTagEdition})}}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"article-detail"}},[s("button",{staticClass:"btn-rdltr",attrs:{type:"submit"},on:{click:function(e){t.$router.go(-1)}}},[t._v("\n    Back\n  ")]),t._v(" "),t.errorMessage?s("p",{staticClass:"alert alert-danger"},[t._v("\n    "+t._s(t.errorMessage)+"\n  ")]):t._e(),t._v(" "),t.article?s("div",[t.onCategoryEdition?s("div",{attrs:{id:"category-update"}},[s("app-category-select",{attrs:{displayLabel:"false"}}),t._v(" "),s("div",{staticClass:"submit"},[s("button",{staticClass:"btn-rdltr",attrs:{type:"submit",disabled:""===t.selectedCategory},on:{click:t.onUpdateCategory}},[t._v("\n          Update\n        ")]),t._v(" "),s("button",{staticClass:"btn-rdltr",on:{click:function(e){t.onCategoryEdition=!t.onCategoryEdition}}},[t._v("\n          Cancel\n        ")])])],1):s("div",[t.article.category?s("router-link",{staticStyle:{cursor:"pointer"},attrs:{tag:"span",to:"/?cat_id="+t.article.category.id}},[s("app-badge",{attrs:{name:t.article.category.name}})],1):t._e(),t._v(" "),s("i",{staticClass:"fa fa-pencil link",attrs:{"aria-hidden":"true"},on:{click:t.updateSelectedCategory}}),t._v(" "),s("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"},on:{click:t.onDeleteArticle}})],1),t._v(" "),s("h1",[t._v(t._s(t.article.title))]),t._v(" "),t.onTagEdition?s("div",{attrs:{id:"tag-update"}},[s("app-tag-multi-select"),t._v(" "),s("div",{staticClass:"submit"},[s("button",{staticClass:"btn-rdltr",attrs:{type:"submit"},on:{click:t.onUpdateTags}},[t._v("\n          Update\n        ")]),t._v(" "),s("button",{staticClass:"btn-rdltr",on:{click:function(e){t.onTagEdition=!t.onTagEdition}}},[t._v("\n          Cancel\n        ")])])],1):s("div",[t._l(t.article.tags,function(t){return s("app-badge",{key:t.id,attrs:{"display-label":!1,"is-tag":!0,name:t.name}})}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.article.tags&&0===t.article.tags.length,expression:"article.tags && article.tags.length === 0"}],staticClass:"no-tags"},[t._v("\n        no tags\n      ")]),t._v(" "),s("i",{staticClass:"fa fa-pencil link",attrs:{"aria-hidden":"true"},on:{click:t.updateSelectedTags}})],2),t._v(" "),s("p",{staticClass:"article-link"},[t._v("\n      Link:\n      "),s("a",{attrs:{href:t.article.url,target:"_blank ",rel:"noopener noreferrer"}},[t._v("\n        "+t._s(t.article.url)+"\n      ")])]),t._v(" "),t.article.html_content?s("app-article-content",{attrs:{"article-content":t.article.html_content}}):t._e(),t._v(" "),s("hr"),t._v(" "),t.article?s("app-article-comments",{attrs:{"article-comments":t.article.comments}}):t._e()],1):t._e()])},staticRenderFns:[]};var S=s("VU/8")(M,U,!1,function(t){s("KnKK")},"data-v-7c570e42",null).exports,N=s("woOf"),q=s.n(N),D={components:{AppBadge:x},props:["article"],methods:{onDeleteArticle:function(){return this.$store.dispatch("deleteArticle",this.article.id)}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-sm-6 col-md-4 col-lg-3"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("button",{staticClass:"close",attrs:{"aria-label":"Close",title:"delete artcle",type:"button"},on:{click:t.onDeleteArticle}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v(" "),s("app-badge",{attrs:{name:t.article.category.name}}),t._v(" "),s("h5",{staticClass:"card-title"},[t._v(t._s(t.article.title))]),t._v(" "),t._l(t.article.tags,function(t){return s("app-badge",{key:t.id,attrs:{"is-tag":!0,name:t.name}})}),t._v(" "),s("p",{staticClass:"card-text"})],2),t._v(" "),s("div",{staticClass:"card-footer"},[s("router-link",{staticClass:"btn-rdltr",attrs:{tag:"button",to:{name:"articleDetail",params:{id:t.article.id}}}},[t._v("\n        Read\n      ")])],1)])])},staticRenderFns:[]};var L={computed:{pagination:function(){return this.$store.getters.pagination}},methods:{getTargetLink:function(t){this.$router.push(p(this.$store.getters,t))}}},V={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row",attrs:{id:"pagination"}},[s("div",{staticClass:"col-1 text-center"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.pagination.has_prev,expression:"pagination.has_prev"}],staticClass:"btn-rdltr",attrs:{type:"submit"},on:{click:function(e){t.getTargetLink(-1)}}},[s("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})])]),t._v(" "),t.pagination.pages>0?s("div",{staticClass:"col-10 text-center page"},[t._v("\n    page "+t._s(t.pagination.page)+" / "+t._s(t.pagination.pages)+"\n  ")]):t._e(),t._v(" "),s("div",{staticClass:"col-1 text-center"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.pagination.has_next,expression:"pagination.has_next"}],staticClass:"btn-rdltr",attrs:{type:"submit"},on:{click:function(e){t.getTargetLink(1)}}},[s("i",{staticClass:"fa fa-chevron-right",attrs:{"aria-hidden":"true"}})])])])},staticRenderFns:[]};var F={components:{AppArticleCard:s("VU/8")(D,R,!1,function(t){s("NYt/")},"data-v-71c17e1b",null).exports,AppPagination:s("VU/8")(L,V,!1,function(t){s("NB8q")},"data-v-00d67b0b",null).exports},computed:{articles:function(){return this.$store.getters.articles},errorMessage:function(){return this.$store.getters.errorMessage},pagination:function(){return this.$store.getters.pagination}},watch:{$route:function(t,e){this.$store.dispatch("getArticles",q()({},t.params,t.query))}},created:function(){if(this.$store.getters.isAuthenticated)return this.$store.dispatch("getArticles",q()({},this.$route.params,this.$route.query))}},K={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"user-articles"}},[t.errorMessage?t._e():s("div",[t.pagination.total>0?s("div",{staticClass:"row articles-msg"},[t._v("\n      "+t._s(t.pagination.total)+"\n      "+t._s("article"+(1!==t.pagination.total?"s":""))+"\n    ")]):t._e(),t._v(" "),s("div",{staticClass:"row"},[0===t.articles.length?s("p",{staticClass:"text-center articles-msg"},[t._v("\n        No articles. Add\n        "),s("router-link",{attrs:{to:"/articles/add"}},[t._v("one")]),t._v("\n        !\n      ")],1):t._e(),t._v(" "),t._l(t.articles,function(t){return s("app-article-card",{key:t.id,attrs:{article:t}})})],2)]),t._v(" "),s("app-pagination")],1)},staticRenderFns:[]};var B={components:{AppArticles:s("VU/8")(F,K,!1,function(t){s("wnq7")},"data-v-4a304895",null).exports,AppCategorySelect:v},computed:{query:{get:function(){return this.$store.getters.query},set:function(t){this.$store.commit("updateQuery",t)}}},methods:{onSearch:function(){this.$router.push(p(this.$store.getters))}}},O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid",attrs:{id:"home"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"row",attrs:{id:"user-categories"}},[s("div",{staticClass:"col-md-3"},[s("app-category-select",{attrs:{filter:"true"}})],1),t._v(" "),s("div",{staticClass:"col search"},[s("div",{staticClass:"input-group"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",attrs:{placeholder:"enter keywords"},domProps:{value:t.query},on:{input:[function(e){e.target.composing||(t.query=e.target.value)},t.onSearch]}})])])])])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"row"},[s("app-articles")],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:""}},[this._v("Search")])])}]};var z=s("VU/8")(B,O,!1,function(t){s("YgRM")},"data-v-4a553363",null).exports,Q={props:["itemType"],data:function(){return{item:{id:null,name:"",description:""}}},computed:{errorMessage:function(){return this.$store.getters.errorMessage},items:function(){return"categories"===this.itemType?this.$store.getters.userCategories:this.$store.getters.userTags}},watch:{items:function(t){var e=this;if(this.$route.params.id&&t){var s=t.filter(function(t){return t.id===+e.$route.params.id});s.length>0?this.item=s[0]:this.$store.commit("setErrorMessage",d(this.itemType,["singular"])+" not found!")}}},beforeDestroy:function(){this.$store.commit("setErrorMessage",null)},methods:{onSubmit:function(){return this.$route.params.id?this.$store.dispatch("update"+d(this.itemType,["capitalize","singular"]),this.item):this.$store.dispatch("add"+d(this.itemType,["capitalize","singular"]),this.item)}}},Y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contnr"},[s("div",{staticClass:"rdltr-box"},[t.errorMessage&&!t.item.id?s("div",[t.errorMessage?s("p",{staticClass:"alert alert-danger"},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]):t._e(),t._v(" "),s("router-link",{staticClass:"btn-rdltr",attrs:{tag:"button",to:"/settings/"+t.itemType}},[t._v("\n        Back to "+t._s(t.itemType)+"\n      ")])],1):s("div",[t.errorMessage?s("p",{staticClass:"alert alert-danger"},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]):t._e(),t._v(" "),s("form",[s("div",{staticClass:"input"},[s("label",{attrs:{for:"name"}},[t._v("Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.name,expression:"item.name"}],attrs:{id:"name",required:""},domProps:{value:t.item.name},on:{input:function(e){e.target.composing||t.$set(t.item,"name",e.target.value)}}})]),t._v(" "),"categories"===t.itemType?s("div",{staticClass:"input"},[s("label",{attrs:{for:"description"}},[t._v("Description")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.description,expression:"item.description"}],attrs:{id:"description"},domProps:{value:t.item.description},on:{input:function(e){e.target.composing||t.$set(t.item,"description",e.target.value)}}})]):t._e(),t._v(" "),s("div",{staticClass:"submit"},[s("button",{attrs:{disabled:""===t.item.name,type:"submit"},on:{click:function(e){e.preventDefault(),t.onSubmit()}}},[t._v("\n            Submit\n          ")]),t._v(" "),s("router-link",{attrs:{tag:"button",to:"/settings/"+t.itemType}},[t._v("\n            Cancel\n          ")])],1)])])])])},staticRenderFns:[]};var I=s("VU/8")(Q,Y,!1,function(t){s("6UTM")},"data-v-7fc03564",null).exports,j=s("fZjL"),W=s.n(j),G={props:{data:Array,columns:Array,filterKey:String,itemType:String},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},data:function(){var t={};return this.columns.forEach(function(e){t[e]=1}),{sortKey:"",sortOrders:t,target:d(this.itemType,["singular","capitalize"])}},computed:{filteredData:function(){var t=this.sortKey?this.sortKey:"id",e=this.filterKey&&this.filterKey.toLowerCase(),s=this.sortOrders[t]||1,a=this.data;return e&&(a=a.filter(function(t){return W()(t).some(function(s){return String(t[s]).toLowerCase().indexOf(e)>-1})})),t&&(a=a.slice().sort(function(e,a){return((e=e[t])===(a=a[t])?0:e>a?1:-1)*s})),a}},methods:{deleteItem:function(t){return this.$store.dispatch("delete"+this.target,t)},sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]}}},H={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table"},[s("thead",[s("tr",[t._l(t.columns,function(e){return s("th",{key:e,class:{active:t.sortKey===e},attrs:{scope:"col"},on:{click:function(s){t.sortBy(e)}}},[t._v("\n          "+t._s(t._f("capitalize")(e))+"\n          "),s("span",{staticClass:"arrow",class:t.sortOrders[e]>0?"asc":"dsc"})])}),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Actions")])],2)]),t._v(" "),s("tbody",t._l(t.filteredData,function(e){return s("tr",{key:e.id},[t._l(t.columns,function(a){return s("td",{key:a},[t._v("\n          "+t._s(e[a])+"\n          "),"name"===a&&e.is_default?s("span",{staticClass:"badge badge-rdltr-small"},[t._v("\n            default\n          ")]):t._e()])}),t._v(" "),s("td",[s("router-link",{staticClass:"link",attrs:{to:{name:"edit"+t.target,params:{id:e.id}}}},[s("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]),t._v(" "),e.is_default?t._e():s("i",{staticClass:"fa fa-trash link",attrs:{"aria-hidden":"true"},on:{click:function(s){t.deleteItem(e.id)}}})],1)],2)}),0)])])},staticRenderFns:[]};var X={components:{AppItemsTables:s("VU/8")(G,H,!1,function(t){s("lRkX")},"data-v-507c1719",null).exports},props:["itemType"],data:function(){return{displayAdd:!1,searchQuery:""}},computed:{errorMessage:function(){return this.$store.getters.errorMessage},itemsColumns:function(){return"categories"===this.itemType?["id","name","description"]:["id","name"]},items:function(){return"categories"===this.itemType?this.$store.getters.userCategories:this.$store.getters.userTags}},beforeDestroy:function(){this.$store.commit("setErrorMessage",null)}},J={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container container-shadow"},[s("div",{staticClass:"row"},[s("router-link",{staticClass:"btn-rdltr",attrs:{to:"/settings",tag:"button"}},[t._v("\n      Back to settings\n    ")]),t._v(" "),s("router-link",{staticClass:"btn-rdltr",attrs:{tag:"button",to:{name:"add"+("categories"===t.itemType?"Category":"Tag")}}},[t._v("\n      Add a "+t._s("categories"===t.itemType?"category":"tag")+"\n    ")])],1),t._v(" "),t.errorMessage?s("div",{staticClass:"row"},[s("p",{staticClass:"alert alert-danger"},[t._v("\n      "+t._s(t.errorMessage)+"\n    ")])]):t._e(),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-group"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"form-control",domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})])]),t._v(" "),t.items?s("div",{staticClass:"row items-row"},[s("app-items-tables",{attrs:{data:t.items,columns:t.itemsColumns,"filter-key":t.searchQuery,"item-type":t.itemType}})],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:""}},[this._v("Search")])])}]};var Z=s("VU/8")(X,J,!1,function(t){s("kWa7")},"data-v-0e9d8128",null).exports,tt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"not-found"},[e("div",{staticClass:"test"},[e("p",[this._v("Page not found!")]),this._v(" "),e("br"),this._v(" "),e("router-link",{staticClass:"btn-rdltr",attrs:{tag:"button",to:"/"}},[this._v("\n      Back to home\n    ")])],1)])},staticRenderFns:[]};var et=s("VU/8")(null,tt,!1,function(t){s("rKuv")},"data-v-3cd44498",null).exports,st={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"contnr",attrs:{id:"actionType"}},[e("div",{staticClass:"rdltr-box"},[e("router-link",{staticClass:"btn-rdltr btn-rdltr-auto",attrs:{tag:"button",to:"/settings/categories"}},[this._v("\n      Categories\n    ")]),this._v(" "),e("router-link",{staticClass:"btn-rdltr btn-rdltr-auto",attrs:{tag:"button",to:"/settings/tags"}},[this._v("\n      Tags\n    ")]),this._v(" "),e("hr"),this._v(" "),e("router-link",{staticClass:"btn-rdltr",attrs:{tag:"button",to:"/"}},[this._v("\n      Back to home\n    ")])],1)])},staticRenderFns:[]};var at=s("VU/8")({},st,!1,function(t){s("G8Ci")},"data-v-ba234620",null).exports,rt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contnr",attrs:{id:"actionType"}},[s("div",{staticClass:"rdltr-box"},[s("form",[s("div",{staticClass:"input"},[s("label",{attrs:{for:"username"}},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],attrs:{id:"username",disabled:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{id:"email",disabled:"",type:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input"},[s("label",{attrs:{for:"email"}},[t._v("Inscription date")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.created_at,expression:"user.created_at"}],attrs:{id:"creationDate",disabled:""},domProps:{value:t.user.created_at},on:{input:function(e){e.target.composing||t.$set(t.user,"created_at",e.target.value)}}})]),t._v(" "),"editProfile"===t.actionType?s("div",{staticClass:"input"},[s("label",{attrs:{for:"password"}},[t._v("Old password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.oldPassword,expression:"oldPassword"}],attrs:{id:"oldPassword",required:"",type:"password"},domProps:{value:t.oldPassword},on:{input:function(e){e.target.composing||(t.oldPassword=e.target.value)}}})]):t._e(),t._v(" "),"editProfile"===t.actionType?s("div",{staticClass:"input"},[s("label",{attrs:{for:"password"}},[t._v("New password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword,expression:"newPassword"}],attrs:{id:"password",required:"",type:"password"},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value)}}})]):t._e(),t._v(" "),"editProfile"===t.actionType?s("div",{staticClass:"input"},[s("label",{attrs:{for:"confirm-password"}},[t._v("Confirm New Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmNewPassword,expression:"confirmNewPassword"}],attrs:{id:"confirm-password",required:"",type:"password"},domProps:{value:t.confirmNewPassword},on:{input:function(e){e.target.composing||(t.confirmNewPassword=e.target.value)}}})]):t._e(),t._v(" "),"editProfile"===t.actionType?s("div",{staticClass:"submit"},[s("button",{attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.onSubmit()}}},[t._v("Submit")]),t._v(" "),s("router-link",{staticClass:"cancel",attrs:{tag:"button",to:"/profile"}},[t._v("Cancel")])],1):s("div",{staticClass:"submit"},[s("router-link",{attrs:{tag:"button",to:"/profile/edit"}},[t._v("\n          Change password\n        ")])],1)]),t._v(" "),t.errorMessage?s("p",{staticClass:"alert alert-danger"},[t._v("\n      "+t._s(t.errorMessage)+"\n    ")]):t._e()])])},staticRenderFns:[]};var nt=s("VU/8")({props:["actionType"],data:function(){return{oldPassword:"",newPassword:"",confirmNewPassword:""}},computed:{errorMessage:function(){return this.$store.getters.errorMessage},user:function(){return this.$store.getters.user}},methods:{onSubmit:function(){var t=this,e={old_password:this.oldPassword,new_password:this.newPassword,new_password_conf:this.confirmNewPassword};this.$store.dispatch("updateProfile",e).then(function(){t.oldPassword="",t.newPassword="",t.confirmNewPassword=""})}}},rt,!1,function(t){s("9S6y")},"data-v-10594885",null).exports,it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contnr",attrs:{id:"actionType"}},[s("div",{staticClass:"rdltr-box"},[s("form",{on:{submit:function(e){e.preventDefault(),t.onSubmit(t.actionType)}}},["register"===t.actionType?s("div",{staticClass:"input"},[s("label",{attrs:{for:"username"}},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{id:"username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]):t._e(),t._v(" "),s("div",{staticClass:"input"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",required:"",type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",required:"",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),"register"===t.actionType?s("div",{staticClass:"input"},[s("label",{attrs:{for:"confirm-password"}},[t._v("Confirm Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],attrs:{id:"confirm-password",type:"password",required:""},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}})]):t._e(),t._v(" "),t.errorMessage?s("p",{staticClass:"alert alert-danger"},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]):t._e(),t._v(" "),t._m(0)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"submit"},[e("button",{attrs:{type:"submit"}},[this._v("Submit")])])}]};var ot=s("VU/8")({props:["actionType"],data:function(){return{confirmPassword:"",email:"",password:"",username:""}},computed:{errorMessage:function(){return this.$store.getters.errorMessage}},watch:{$route:function(t,e){this.$store.commit("setErrorMessage",null)}},beforeDestroy:function(){this.$store.commit("setErrorMessage",null)},methods:{onSubmit:function(t){var e={email:this.email,password:this.password};return"register"===t&&(e.username=this.username,e.password_conf=this.confirmPassword),this.$store.dispatch("loginOrRegister",{actionType:t,formData:e})}}},it,!1,function(t){s("Sdj3")},"data-v-babdef4e",null).exports,ct=s("NYxO"),ut=s("//Fk"),lt=s.n(ut),dt=s("mtWM"),pt=s.n(dt),mt=pt.a.create({baseURL:"http://localhost:5000/api"});mt.interceptors.request.use(function(t){if(yt.state.user.authToken){var e="Bearer "+yt.state.user.authToken;t.headers.Authorization!==e&&(t.headers.Authorization="Bearer "+yt.state.user.authToken)}return t},function(t){return lt.a.reject(t)});var gt=mt,vt={state:{article:{},articles:[],pagination:{},query:""},getters:{article:function(t){return t.article},articles:function(t){return t.articles},pagination:function(t){return t.pagination},query:function(t){return t.query}},mutations:{getUserArticle:function(t,e){t.article=e},getUserArticles:function(t,e){t.articles=e.data,t.pagination=e.pagination},updateQuery:function(t,e){t.query=e},clearArticles:function(t){t.article={},t.articles=[],t.pagination={}}},actions:{addArticle:function(t,e){var s=t.commit,a=t.dispatch;a("updateLoading",!0),gt.post("articles",e).then(function(t){"success"===t.data.status&&(a("updateLoading",!1),Tt.push("/articles/"+t.data.data[0].id))}).catch(function(t){return l(s,t,"error on adding article")})},getArticle:function(t,e){var s=t.commit;gt.get("articles/"+e).then(function(t){"success"===t.data.status&&s("getUserArticle",t.data.data[0])}).catch(function(t){return l(s,t,"error on fetching article")})},getArticles:function(t,e){var s=t.commit,a=t.dispatch,r="articles";W()(e).length>0&&(r+="?",W()(e).map(function(t){"cat_id"===t&&a("updateSelectedCategory",+e[t]),r+="&"+t+"="+e[t]})),gt.get(r).then(function(t){if("success"===t.data.status){if(t.data.pagination.pages>0&&t.data.pagination.page>t.data.pagination.pages)return Tt.replace("/articles/page/"+t.data.pagination.pages);s("getUserArticles",t.data)}}).catch(function(t){return l(s,t,"error on fetching articles")})},updateArticle:function(t,e){var s=t.commit;gt.patch("articles/"+e.id,e.formData).then(function(t){"success"===t.data.status&&s("getUserArticle",t.data.data[0])}).catch(function(t){return l(s,t,"error on article update")})},deleteArticle:function(t,e){var s=t.commit,a=t.dispatch,r=t.state;gt.delete("articles/"+e).then(function(t){204===t.status&&a("getArticles",{page:r.pagination.page})}).catch(function(t){return l(s,t,"error on article deletion")})}}},ft={state:{categories:[]},getters:{},mutations:{},actions:{addCategory:function(t,e){var s=t.commit;gt.post("categories",e).then(function(){Tt.push("/settings/categories")}).catch(function(t){return l(s,t,"error on category creation")})},updateCategory:function(t,e){var s=t.commit;gt.patch("categories/"+e.id,e).then(function(){Tt.push("/settings/categories")}).catch(function(t){return l(s,t,"error on category update")})},deleteCategory:function(t,e){var s=t.commit,a=t.dispatch;t.state;gt.delete("categories/"+e).then(function(t){204===t.status&&a("getUserProfile")}).catch(function(t){return l(s,t,"error on category deletion")})}}},ht={state:{tags:[]},getters:{},mutations:{},actions:{addTag:function(t,e){var s=t.commit;gt.post("tags",e).then(function(){Tt.push("/settings/tags")}).catch(function(t){return l(s,t,"error on tag creation")})},updateTag:function(t,e){var s=t.commit;gt.patch("tags/"+e.id,e).then(function(){Tt.push("/settings/tags")}).catch(function(t){return l(s,t,"error on tag update")})},deleteTag:function(t,e){var s=t.commit,a=t.dispatch;t.state;gt.delete("tags/"+e).then(function(t){204===t.status&&a("getUserProfile")}).catch(function(t){return l(s,t,"error on tag deletion")})}}},_t=pt.a.create({baseURL:"http://localhost:5000/api"}),Ct={state:{authToken:null,user:{}},getters:{isAuthenticated:function(t){return null!==t.authToken},user:function(t){return t.user},userCategories:function(t){return t.user.categories},userTags:function(t){return t.user.tags}},mutations:{authUser:function(t,e){t.authToken=e,t.userErrorMessage=null},clearUserData:function(t){t.authToken=null,t.user={},t.userErrorMessage=null},userProfile:function(t,e){t.user=e}},actions:{checkUserAuth:function(t){var e=t.commit,s=t.dispatch;window.localStorage.authToken&&(e("authUser",window.localStorage.authToken),s("getUserProfile"))},getUserProfile:function(t){var e=t.commit;gt.get("auth/profile").then(function(t){"success"===t.data.status&&e("userProfile",t.data.user)}).catch(function(t){return l(e,t,"error on profile")})},loginOrRegister:function(t,e){var s=t.commit,a=t.dispatch;_t.post("/auth/"+e.actionType,e.formData).then(function(t){if("success"===t.data.status){var e=t.data.auth_token;window.localStorage.setItem("authToken",e),s("authUser",e),s("setErrorMessage",""),a("getUserProfile"),Tt.push("/")}}).catch(function(t){return l(s,t,"error on "+e.actionType)})},logout:function(t){var e=t.commit;e("clearArticles"),e("clearUserData"),localStorage.removeItem("authToken"),Tt.push("/login")},updateProfile:function(t,e){var s=t.commit;gt.post("/auth/profile/edit",e).then(function(t){"success"===t.data.status&&Tt.push("/profile")}).catch(function(t){return l(s,t,"error on password update")})}}};a.a.use(ct.a);var yt=new ct.a.Store({state:{selectedCategory:"",selectedTags:[],loading:!1,errorMessage:null},mutations:{setCategory:function(t,e){t.selectedCategory=e},setErrorMessage:function(t,e){t.errorMessage=e,t.loading=!1},setLoading:function(t,e){t.loading=e},setTags:function(t,e){t.selectedTags=e}},actions:{updateErrorMessage:function(t,e){(0,t.commit)("setErrorMessage",e)},updateLoading:function(t,e){(0,t.commit)("setLoading",e)},updateSelectedCategory:function(t,e){(0,t.commit)("setCategory",e)},updateSelectedTags:function(t,e){(0,t.commit)("setTags",e)}},getters:{loading:function(t){return t.loading},selectedCategory:function(t){return t.selectedCategory},selectedTags:function(t){return t.selectedTags},errorMessage:function(t){return t.errorMessage}},modules:{articles:vt,categories:ft,tags:ht,user:Ct}});a.a.use(u.a);var bt=[{path:"/",component:z,name:"home"},{path:"/register",component:ot,props:{actionType:"register"}},{path:"/login",component:ot,props:{actionType:"login"}},{path:"/profile",component:nt,props:{actionType:"viewProfile"}},{path:"/profile/edit",component:nt,props:{actionType:"editProfile"}},{path:"/articles/add",component:w},{path:"/articles/:id",component:S,name:"articleDetail"},{path:"/articles/page/:page",component:z,name:"articlesPage"},{path:"/settings",component:at},{path:"/settings/categories/add",component:I,name:"addCategory",props:{itemType:"categories"}},{path:"/settings/categories/:id/edit",component:I,name:"editCategory",props:{itemType:"categories"}},{path:"/settings/categories",component:Z,props:{itemType:"categories"}},{path:"/settings/tags/add",component:I,name:"addTag",props:{itemType:"tags"}},{path:"/settings/tags/:id/edit",component:I,name:"editTag",props:{itemType:"tags"}},{path:"/settings/tags",component:Z,props:{itemType:"tags"}},{path:"*",component:et}],wt=new u.a({mode:"history",routes:bt});wt.beforeEach(function(t,e,s){yt.dispatch("checkUserAuth").then(function(){return yt.getters.isAuthenticated&&["/login","/register"].includes(t.path)?s("/"):yt.getters.isAuthenticated||["/login","/register"].includes(t.path)?void 0:s("/login")}),s()});var Tt=wt;a.a.config.productionTip=!1,new a.a({el:"#app",router:Tt,store:yt,render:function(t){return t(c)}})},NLYe:function(t,e){},"NYt/":function(t,e){},Sdj3:function(t,e){},UTWD:function(t,e){},YgRM:function(t,e){},ivaL:function(t,e){},kWa7:function(t,e){},lRkX:function(t,e){},qVcS:function(t,e){},rKuv:function(t,e){},u7RO:function(t,e){},wnq7:function(t,e){},zjQv:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d86b3a129968c60ed636.js.map