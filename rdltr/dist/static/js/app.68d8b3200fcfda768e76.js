webpackJsonp([1],{"1JyO":function(e,t){},"3mPE":function(e,t){},CtHJ:function(e,t){},Cz9A:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("/5sW"),a={computed:{auth:function(){return this.$store.getters.isAuthenticated},username:function(){return this.$store.getters.user.username}},methods:{onLogout:function(){this.$store.dispatch("logout")},displayMenu:function(){var e=document.getElementById("responsive-navbar");"nav"===e.className?e.className+=" responsive":e.className="nav"}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{attrs:{id:"header"}},[r("div",{staticClass:"logo"},[r("router-link",{attrs:{to:"/"}},[e._v("\n      rdltr "),r("small",[e._v('a simple "read-it later" app')])])],1),e._v(" "),r("nav",{staticClass:"nav",attrs:{id:"responsive-navbar"},on:{click:e.displayMenu}},[r("ul",[e.auth?e._e():r("li",{staticClass:"menu"},[r("router-link",{attrs:{to:"/register"}},[e._v("Register")])],1),e._v(" "),e.auth?e._e():r("li",{staticClass:"menu"},[r("router-link",{attrs:{to:"/login"}},[e._v("Log in")])],1),e._v(" "),e.auth?r("li",{staticClass:"user menu"},[r("router-link",{attrs:{to:"/profile"}},[e._v(e._s(e.username))])],1):e._e(),e._v(" "),e.auth?r("li",{staticClass:"menu"},[r("span",{staticClass:"logout",on:{click:e.onLogout}},[e._v("Logout")])]):e._e()])]),e._v(" "),r("div",{attrs:{id:"nav-icon"},on:{click:e.displayMenu}},[r("i",{staticClass:"fa fa-bars"})])])},staticRenderFns:[]};var i={name:"app",components:{"app-header":r("VU/8")(a,n,!1,function(e){r("cr/h")},"data-v-45cc0afb",null).exports}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("app-header"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var u=r("VU/8")(i,o,!1,function(e){r("ieMk")},null,null).exports,c=r("/ocq"),l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.displayLabel?r("label",[e._v("\n    Category\n  ")]):e._e(),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],staticClass:"form-control",attrs:{id:"categories"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedCategory=t.target.multiple?r:r[0]}}},e._l(e.userCategories,function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),0)])},staticRenderFns:[]};var d=r("VU/8")({props:["displayLabel"],computed:{selectedCategory:{get:function(){return this.$store.getters.selectedCategory},set:function(e){this.$store.commit("updateCategory",e)}},userCategories:function(){return this.$store.getters.userCategories}},beforeDestroy:function(){this.$store.commit("updateCategory","")}},l,!1,function(e){r("nMJd")},"data-v-e1d231dc",null).exports,p={data:function(){return{link:""}},components:{AppCategorySelect:d},computed:{errMessage:function(){return this.$store.getters.articleErrorMessage},selectedCategory:function(){return this.$store.getters.selectedCategory}},methods:{onSubmit:function(){var e={url:this.link,category_id:this.selectedCategory};return this.$store.dispatch("addArticle",e)}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contnr",attrs:{id:"add-article"}},[r("div",{staticClass:"article-form"},[r("div",{staticClass:"title"},[e._v("Add an article")]),e._v(" "),r("hr"),e._v(" "),r("form",{on:{submit:function(t){t.preventDefault(),e.onSubmit()}}},[r("div",{staticClass:"input"},[r("label",{attrs:{for:"link"}},[e._v("Link")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.link,expression:"link"}],attrs:{id:"link",required:""},domProps:{value:e.link},on:{input:function(t){t.target.composing||(e.link=t.target.value)}}})]),e._v(" "),r("app-category-select",{attrs:{"display-label":"true"}}),e._v(" "),e._m(0)],1),e._v(" "),e.errMessage?r("p",{staticClass:"user-error"},[e._v(e._s(e.errMessage))]):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"submit add-article-submit"},[t("button",{attrs:{type:"submit"}},[this._v("Submit")])])}]};var v=r("VU/8")(p,m,!1,function(e){r("Cz9A")},"data-v-18ed2398",null).exports,f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("span",{staticClass:"badge badge-rdltr"},[e._v("\n      "+e._s(e.categories.filter(function(t){return t.id===e.article.category_id})[0].name)+"\n    ")]),e._v(" "),r("h5",{staticClass:"card-title"},[e._v(e._s(e.article.title))]),e._v(" "),r("p",{staticClass:"card-text"})]),e._v(" "),r("div",{staticClass:"card-footer"},[r("router-link",{staticClass:"btn-rdltr",attrs:{to:"#",tag:"button"}},[e._v("Read")])],1)])},staticRenderFns:[]};var g={computed:{articles:{get:function(){return this.$store.getters.articles}}},components:{AppArticleCard:r("VU/8")({props:["article"],computed:{categories:function(){return this.$store.getters.user.categories}}},f,!1,function(e){r("CtHJ")},"data-v-47cbcf13",null).exports},created:function(){this.$store.dispatch("getArticles")}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row",attrs:{id:"user-articles"}},[0===e.articles.length?r("p",[e._v("\n    No articles. Add "),r("router-link",{attrs:{to:"/articles/add"}},[e._v("one")]),e._v("!\n  ")],1):e._e(),e._v(" "),r("div",{staticClass:"card-group"},e._l(e.articles,function(e){return r("app-article-card",{key:e.id,attrs:{article:e}})}),1)])},staticRenderFns:[]};var h={data:function(){return{query:""}},components:{AppArticles:r("VU/8")(g,_,!1,function(e){r("Na5r")},"data-v-d4d76cfa",null).exports,AppCategorySelect:d}},w={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-fluid",attrs:{id:"home"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"row",attrs:{id:"user-categories"}},[r("div",{staticClass:"col-md-3"},[r("app-category-select")],1),e._v(" "),r("div",{staticClass:"col search"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"form-control",domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),e._m(0)])]),e._v(" "),r("div",{staticClass:"col-md-1"},[r("router-link",{staticClass:"btn-rdltr",attrs:{to:"/articles/add",tag:"button",type:"submit"}},[r("i",{staticClass:"fa fa-plus-square",attrs:{"aria-hidden":"true"}})])],1)])])]),e._v(" "),r("hr"),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("app-articles")],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn-rdltr",attrs:{type:"submit"}},[this._v("Search")])])}]};var C=r("VU/8")(h,w,!1,function(e){r("uszm")},"data-v-16b348f9",null).exports,y={render:function(){var e=this.$createElement;return(this._self._c||e)("p",[this._v("404 - Not Found")])},staticRenderFns:[]};var b=r("VU/8")(null,y,!1,function(e){r("dkey")},"data-v-3ea2f417",null).exports,P={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contnr",attrs:{id:"actionType"}},[r("div",{staticClass:"user-form"},[r("form",[r("div",{staticClass:"input"},[r("label",{attrs:{for:"username"}},[e._v("Username")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{id:"username",disabled:""},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"input"},[r("label",{attrs:{for:"email"}},[e._v("Email")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email",id:"email",disabled:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"input"},[r("label",{attrs:{for:"email"}},[e._v("Inscription date")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.created_at,expression:"user.created_at"}],attrs:{id:"creationDate",disabled:""},domProps:{value:e.user.created_at},on:{input:function(t){t.target.composing||e.$set(e.user,"created_at",t.target.value)}}})]),e._v(" "),"editProfile"===e.actionType?r("div",{staticClass:"input"},[r("label",{attrs:{for:"password"}},[e._v("Old password")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],attrs:{type:"password",id:"oldPassword",required:""},domProps:{value:e.oldPassword},on:{input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}})]):e._e(),e._v(" "),"editProfile"===e.actionType?r("div",{staticClass:"input"},[r("label",{attrs:{for:"password"}},[e._v("New password")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],attrs:{type:"password",id:"password",required:""},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]):e._e(),e._v(" "),"editProfile"===e.actionType?r("div",{staticClass:"input"},[r("label",{attrs:{for:"confirm-password"}},[e._v("Confirm New Password")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmNewPassword,expression:"confirmNewPassword"}],attrs:{type:"password",id:"confirm-password",required:""},domProps:{value:e.confirmNewPassword},on:{input:function(t){t.target.composing||(e.confirmNewPassword=t.target.value)}}})]):e._e(),e._v(" "),"editProfile"===e.actionType?r("div",{staticClass:"submit"},[r("button",{attrs:{type:"submit"},on:{click:function(t){t.preventDefault(),e.onSubmit()}}},[e._v("Submit")]),e._v(" "),r("router-link",{staticClass:"cancel",attrs:{to:"/profile",tag:"button"}},[e._v("Cancel")])],1):r("div",{staticClass:"submit"},[r("router-link",{attrs:{to:"/profile/edit",tag:"button"}},[e._v("Change password")])],1)]),e._v(" "),e.errMessage?r("p",{staticClass:"user-error"},[e._v(e._s(e.errMessage))]):e._e()])])},staticRenderFns:[]};var k=r("VU/8")({props:["actionType"],data:function(){return{oldPassword:"",newPassword:"",confirmNewPassword:""}},computed:{errMessage:function(){return this.$store.getters.userErrorMessage},user:function(){return this.$store.getters.user}},methods:{onSubmit:function(){var e=this,t={old_password:this.oldPassword,new_password:this.newPassword,new_password_conf:this.confirmNewPassword};this.$store.dispatch("updateProfile",t).then(function(){e.oldPassword="",e.newPassword="",e.confirmNewPassword=""})}}},P,!1,function(e){r("3mPE")},"data-v-8016edf4",null).exports,E={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contnr",attrs:{id:"actionType"}},[r("div",{staticClass:"user-form"},[r("form",{on:{submit:function(t){t.preventDefault(),e.onSubmit(e.actionType)}}},["register"===e.actionType?r("div",{staticClass:"input"},[r("label",{attrs:{for:"username"}},[e._v("Username")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{id:"username",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]):e._e(),e._v(" "),r("div",{staticClass:"input"},[r("label",{attrs:{for:"email"}},[e._v("Email")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",id:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"input"},[r("label",{attrs:{for:"password"}},[e._v("Password")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),"register"===e.actionType?r("div",{staticClass:"input"},[r("label",{attrs:{for:"confirm-password"}},[e._v("Confirm Password")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],attrs:{type:"password",id:"confirm-password",required:""},domProps:{value:e.confirmPassword},on:{input:function(t){t.target.composing||(e.confirmPassword=t.target.value)}}})]):e._e(),e._v(" "),e._m(0)]),e._v(" "),e.errMessage?r("p",{staticClass:"user-error"},[e._v(e._s(e.errMessage))]):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"submit"},[t("button",{attrs:{type:"submit"}},[this._v("Submit")])])}]};var M=r("VU/8")({props:["actionType"],data:function(){return{username:"",email:"",password:"",confirmPassword:""}},computed:{errMessage:function(){return this.$store.getters.userErrorMessage}},methods:{onSubmit:function(e){var t={email:this.email,password:this.password};return"register"===e&&(t.username=this.username,t.password_conf=this.confirmPassword),this.$store.dispatch("loginOrRegister",{actionType:e,formData:t})}}},E,!1,function(e){r("1JyO")},"data-v-cee8237c",null).exports,$=r("NYxO"),N=r("//Fk"),T=r.n(N),A=r("mtWM"),U=r.n(A),x=U.a.create({baseURL:"http://localhost:5000/api"});x.interceptors.request.use(function(e){if(L.state.user.authToken){var t="Bearer "+L.state.user.authToken;e.headers.Authorization!==t&&(e.headers.Authorization="Bearer "+L.state.user.authToken)}return e},function(e){return T.a.reject(e)});var S=x,q=function(e,t,r){return t.response?e("updateArticlesErrorMsg",t.response.data.message):e("updateArticlesErrorMsg",t.message?t.message:r)},R={state:{articles:[],articleErrorMessage:null},getters:{articles:function(e){return e.articles},articleErrorMessage:function(e){return e.articleErrorMessage}},mutations:{updateArticlesErrorMsg:function(e,t){e.articleErrorMessage=t},getUserArticles:function(e,t){e.articles=t}},actions:{getArticles:function(e){var t=e.commit;S.get("articles").then(function(e){"success"===e.data.status&&t("getUserArticles",e.data.data)}).catch(function(e){return q(t,e,"error on articles fetch")})},addArticle:function(e,t){var r=e.commit;S.post("articles",t).then(function(e){"success"===e.data.status&&z.replace("/")}).catch(function(e){return q(r,e,"error on article add")})}}},F=U.a.create({baseURL:"http://localhost:5000/api"}),V=function(e,t,r){return t.response?e("updateErrorMsg",t.response.data.message):e("updateErrorMsg",t.message?t.message:r)},D={state:{authToken:null,user:{},userErrorMessage:null},getters:{isAuthenticated:function(e){return null!==e.authToken},user:function(e){return e.user},userCategories:function(e){return e.user.categories},userErrorMessage:function(e){return e.userErrorMessage}},mutations:{authUser:function(e,t){e.authToken=t,e.userErrorMessage=null},clearUserData:function(e,t){e.authToken=null,e.user={},e.userErrorMessage=null},updateErrorMsg:function(e,t){e.userErrorMessage=t},userProfile:function(e,t){e.user=t}},actions:{checkUserAuth:function(e){var t=e.commit,r=e.dispatch;window.localStorage.authToken&&(t("authUser",window.localStorage.authToken),r("getUserProfile"))},getUserProfile:function(e){var t=e.commit;S.get("auth/profile").then(function(e){"success"===e.data.status&&t("userProfile",e.data.user)}).catch(function(e){return V(t,e,"error on profile")})},loginOrRegister:function(e,t){var r=e.commit,s=e.dispatch;F.post("/auth/"+t.actionType,t.formData).then(function(e){if("success"===e.data.status){var t=e.data.auth_token;window.localStorage.setItem("authToken",t),r("authUser",t),s("getUserProfile"),z.replace("/")}}).catch(function(e){return V(r,e,"error on "+t.actionType)})},logout:function(e){(0,e.commit)("clearUserData"),localStorage.removeItem("authToken"),z.replace("/login")},updateProfile:function(e,t){var r=e.commit;S.post("/auth/profile/edit",t).then(function(e){"success"===e.data.status&&z.replace("/profile")}).catch(function(e){return V(r,e,"error on password update")})}}};s.a.use($.a);var L=new $.a.Store({state:{selectedCategory:""},mutations:{updateCategory:function(e,t){e.selectedCategory=t}},actions:{updateSelectedCategory:function(e,t){(0,e.commit)("updateCategory",t)}},getters:{selectedCategory:function(e){return e.selectedCategory}},modules:{articles:R,user:D}});function J(e,t,r){L.dispatch("checkUserAuth").then(function(){return L.getters.isAuthenticated&&["/login","/register"].includes(e.path)?r("/"):L.getters.isAuthenticated||["/login","/register"].includes(e.path)?void 0:r("/login")}),r()}s.a.use(c.a);var O=[{path:"/",component:C,beforeEnter:J},{path:"/register",component:M,props:{actionType:"register"},beforeEnter:J},{path:"/login",component:M,props:{actionType:"login"},beforeEnter:J},{path:"/profile",component:k,props:{actionType:"viewProfile"},beforeEnter:J},{path:"/profile/edit",component:k,props:{actionType:"editProfile"},beforeEnter:J},{path:"/articles/add",component:v,beforeEnter:J},{path:"*",component:b}],z=new c.a({mode:"history",routes:O});s.a.config.productionTip=!1,new s.a({el:"#app",router:z,store:L,render:function(e){return e(u)}})},Na5r:function(e,t){},"cr/h":function(e,t){},dkey:function(e,t){},ieMk:function(e,t){},nMJd:function(e,t){},uszm:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.68d8b3200fcfda768e76.js.map